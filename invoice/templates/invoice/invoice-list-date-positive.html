{% extends 'invoice/base.html' %}
{% load static %}
{% block content %}
<!--
  ~ Copyright (c) 2022. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
  ~ Morbi non lorem porttitor neque feugiat blandit. Ut vitae ipsum eget quam lacinia accumsan.
  ~ Etiam sed turpis ac ipsum condimentum fringilla. Maecenas magna.
  ~ Proin dapibus sapien vel ante. Aliquam erat volutpat. Pellentesque sagittis ligula eget metus.
  ~ Vestibulum commodo. Ut rhoncus gravida arcu.
  -->

<head>
    <!-- CSS LINK FROM VIEWS.PY -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="static\css\style.css">
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://kit.fontawesome.com/kitcode.js" crossorigin="anonymous"> </script>
    <script src="https://kit.fontawesome.com/61ebb60581.js" crossorigin="anonymous"> </script>


</head>
<!-- side nav -->

<div class="sidenav">
    <!-- logo section -->
    <div class="aside">
        <div class="aside_one">
            <img src="https://media-exp1.licdn.com/dms/image/C4D03AQEw4CeRYGE1Fg/profile-displayphoto-shrink_200_200/0/1602676941276?e=1655337600&v=beta&t=SYbeRRL8MilPLKuOpl5EG1U6nBtAtw5pLb3G_sQXqo4" style="border-radius: 50%; height: 40px; width: 40px;">
        </div>

        <div class="aside_two">
            <h5 style="color: white; padding-left: 10px;">APRO ESTIMATE</h5>
            <hr>
        </div>






    </div>

<div class="aside_one">
            <div class="dropdown">
                <button class="dropbtn" style="padding-right:15px ;">CREATE</button>
                <div class="dropdown-content">
                    <a href="{% url 'invoice:invoice-create-tax-estimate' %}" style="color: white;">TAX ESTIMATE</a>
                </div>
            </div>
        </div>
<div class="aside_one">
            <div class="dropdown">
                <button class="dropbtn" style="padding-right:29px ;">VIEW</button>
                <div class="dropdown-content">
                      <a href="{% url 'invoice:invoice-list' %}" style="color: white;">VIEW TAX ESTIMATES</a>
                </div>
            </div>
    </div>
<div class="aside_one">
            <div class="dropdown">
                <button class="dropbtn" style="padding-right:14px ;">EXPORT</button>
                <div class="dropdown-content">
                      <a href="{% url 'invoice:export-customers' %}" style="color: white;">EXPORT CUSTOMERS AS CSV</a>
                      <a href="{% url 'invoice:export-users' %}" style="color: white;">EXPORT USERS AS CSV</a>
                </div>
            </div>
</div>
<div class="aside_one">
            <div class="dropdown">
                <button class="dropbtn" style="padding-right:29px ;">{{sort}}</button>
                <div class="dropdown-content">
                      <a href="{% url 'invoice:invoice-list-date-positive' %}" style="color: white;">SORT BY DATE (+)</a>
                      <a href="{% url 'invoice:invoice-list-date-negative' %}" style="color: white;">SORT BY DATE (-)</a>

                </div>

            </div>
</div>

    <!-- end logo section -->
    <!-- dasboard dropdwn -->
    <!-- end dasbord dropdwn -->

    <!-- filter section -->
    <div class="filter_container">



        <div class="filter_container_inner">
            <div style="padding:10px;">
                <p style="background-color:#343a40 ; width: 150px;" class="sidebarsection">
                    <a href="/users-list" class="has-text-white" style="font-size: 11px;
font-weight: bold;"><b style="color: white;">View Users</b></a>
                </p>

            </div>
        </div>

        <div class="filter_container_inner">
            <div style="padding:10px;">
                <p style="background-color:#343a40 ; width: 150px;" class="sidebarsection">
                    <a href="/admin/auth/user/add/" class="has-text-white" style="font-size: 11px;
font-weight: bold;"><b style="color: white;">Create Users</b></a>
                </p>
            </div>
        </div>
        <div class="filter_container_inner">
            <div style="padding:10px;">
                <p style="background-color:#343a40 ; width: 150px;" class="sidebarsection">
                    <a href="/admin/password_change/" class="has-text-white" style="font-size: 11px;
font-weight: bold;"><b style="color: white;">Change Password</b></a>
                </p>

            </div>
        </div>
        <div class="filter_container_inner">
            <div style="padding:10px;">
                <p style="background-color:#343a40 ; width: 150px;" class="sidebarsection">
                    <a href="/admin" class="has-text-white" style="font-size: 11px;
font-weight: bold;"><b style="color: white;">Admin Panel</b></a>
                </p>
            </div>
        </div>
        <div class="filter_container_inner">
            <div style="padding:10px;">
                <p style="background-color:#343a40 ; width: 150px;" class="sidebarsection">
                    <a href="/system-status" class="has-text-white" style="font-size: 11px;
font-weight: bold;"><b style="color: white;">System Status</b></a>
                </p>
            </div>
        </div>
        <div class="filter_container_inner">
            <div style="padding:10px;">
                <!-- <p style="background-color:#343a40 ; width: 150px;" class="sidebarsection">
                    <a href="{% url 'invoice:logout' %}" class="has-text-white" style="font-size: 11px;
font-weight: bold;"><b style="color: white;">{{logout}}</b></a>
                </p> -->
            </div>
        </div>
    </div>
    <!-- end filter section -->
</div>


<!-- end side nav -->
<!-- box section -->

<!-- top bar bootstrap -->
<header>
    {% if user.is_authenticated %}

<ul>
    <li><a class="active" href="{% url 'invoice:user-account' %}">

        <div>Current User: {{user.get_username}}</div>


    </a></li>
    <li><a href="#">

        <div>Current Private IP: {{current_ip_address}}</div>
    </a></li>
    <li><a href="#">
        <div>Last Login Time: {{user.last_login}}</div>
    </a></li>

    <li style="float:right">

        <p style="background-color:#343a40 ; width: 150px;" class="sidebarsection">
            <a href="{% url 'invoice:logout' %}" class="has-text-white" style="font-size: 11px;
font-weight: bold;"><b style="color: white;">LOGOUT</b></a>
        </p>



    </li>
  </ul>

  {% else %}
{% endif %}

<!-- end topbar bootstrap -->

    <div class="flex-container">

        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-info">
                <div class="inner">
                    <h3>{{total_count}}</h3>
                    <a href=""><b>No. of Estimates</b></a>
                </div>
                <div class="icon">
                    <i class="far fa-file-alt"></i>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-success">
                <div class="inner">
                    <h3>3</h3>
                    <a href="{% url 'invoice:our-services' %}"><b>No. of Services</b></a>
                </div>
                <div class="icon">
                    <i class="fas fa-wrench"></i>

                </div>
            </div>
        </div>

        <div class="col-lg-3 col-6">
            <div class="small-box bg-danger">
                <div class="inner">
                    <h3>{{total_users}}</h3>
            <a href="/admin/auth/user/">    <b>No. of Users</b></a>
                </div>
                <div class="icon">

                    <i class="fas fa-user"></i>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-6">
            <div class="small-box bg-warning">
                <div class="inner">
                    <h3>0</h3>
                    <a href="#"> <b>No. of Errors</b></a>
                </div>
                <div class="icon">
                    <i class="fas fa-shield-alt"></i>

                </div>
            </div>
        </div>
    </div>
</header>
<!-- end box section -->
<!-- <h1 style="text-align:center;"><b>Estimate Generator</b></h1>  <br>&nbsp;
<div style="text-align: center;"><h3 id="clock"></h3></div> -->


    <form action="{% url 'invoice:invoice-list' %}" method="post">
        {% csrf_token %}
        <div>
            <header class="card-header">
                <p class="card-header-title">
                    <br>&nbsp;
            </header>
            <!-- end section -->
            <div class="card-content-edited">
                <div class="content">

  <script>
        (function(document) {
            'use strict';

            var TableFilter = (function(myArray) {
                var search_input;

                function _onInputSearch(e) {
                    search_input = e.target;
                    var tables = document.getElementsByClassName(search_input.getAttribute('data-table'));
                    myArray.forEach.call(tables, function(table) {
                        myArray.forEach.call(table.tBodies, function(tbody) {
                            myArray.forEach.call(tbody.rows, function(row) {
                                var text_content = row.textContent.toLowerCase();
                                var search_val = search_input.value.toLowerCase();
                                row.style.display = text_content.indexOf(search_val) > -1 ? '' : 'none';
                            });
                        });
                    });
                }

                return {
                    init: function() {
                        var inputs = document.getElementsByClassName('search-input');
                        myArray.forEach.call(inputs, function(input) {
                            input.oninput = _onInputSearch;
                        });
                    }
                };
            })(Array.prototype);

            document.addEventListener('readystatechange', function() {
                if (document.readyState === 'complete') {
                    TableFilter.init();
                }
            });

        })(document);
    </script>
                    <div style="text-align: right;"> <input type="search" placeholder="Search..." class="form-control search-input" style="background-color: white;
    color: black;
    border: ridge;
    width: auto;
border-color: #74bef5;"  data-table="customers-list"/></div>
<br/>

                    <table class="table is-fullwidth is-bordered is-hoverable is-striped customers-list">
                        <tbody>
                        <thead>
                        <tr>
                            <th></th>
                            <th style="text-align:center;">{{table_head_a}}</th>
                            <th style="text-align:center;">{{table_head_b}}</th>
                            <th style="text-align:center;">{{table_head_c}}</th>
                            <th style="text-align:center;">{{table_head_d}}</th>
                            <th style="text-align:center;">{{table_head_e}}</th>
                            <th style="text-align:center;">{{table_head_f}}<br>{{table_head_excluded_GST}}</th>
                            <th style="text-align:center;">{{table_head_f}}<br>{{table_head_included_GST}}</th>
                            <th style="text-align:center;">{{table_head_view}}</th>
                            <th style="text-align:center;">{{table_head_edit}}</th>
                            <th style="text-align:center;">{{table_head_delete}}</th>
                            <th style="text-align:center;">{{table_head_download}}</th>
                        </tr>
                        </thead>
                        {% for invoice1 in invoices1 %}
                        <tr>
                            <td><input class="checkbox" type="checkbox" value="{{invoice1.id}}" name="invoice1_id"
                                       size="2"/></td>
                            <td width="10%" style="text-align:center;vertical-align: middle;">{{invoice1.id}}</td>
                            <td width="10%" style="text-align:center;vertical-align: middle;">{{invoice1.date}}</td>
                            <td width="39%" style="text-align:center;vertical-align: middle;">{{invoice1.customer}}</td>
                            <td width="39%" style="text-align:center;vertical-align: middle;"><img class="service-img" src="{{invoice1.service}}">
                            </td>
                            <td style="text-align:center;vertical-align: middle;">{{invoice1.gstpercentage}}%</td>
                            <td style="text-align:center;vertical-align: middle;">{{invoice1.currency}}<br>{{invoice1.total_amount}}
                            </td>
                            <td style="text-align:center;vertical-align: middle;">{{invoice1.currency}}<br>
                                {{invoice1.subtotal}}
                            </td>

                            <td width="1%">
                                <a class="w3-btn w3-white w3-border w3-border-red w3-round-large"
                                   href="{% url 'invoice:invoice-detail' id=invoice1.id %}" style="box-shadow: 0 0 3px 3px #0ab6d921;
border-radius: 73px;">
                                    	<i class="far fa-eye"></i>

                                </a>
                            </td>
                            <td width="1%">
                                <a class="w3-btn w3-white w3-border w3-border-red w3-round-large"
                                   href="{% url 'invoice:update' id=invoice1.id %}" style="box-shadow: 0 0 3px 3px #0ab6d921;
border-radius: 73px;">
                                  <i class="fas fa-edit"></i>

                                </a>
                            </td>
                            <td width="1%">
                                <a class="w3-btn w3-white w3-border w3-border-red w3-round-large"
                                   href="{% url 'invoice:invoice-delete' id=invoice1.id %}" style="box-shadow: 0 0 3px 3px #0ab6d921;
border-radius: 73px;">
                                    	   <i class="fas fa-trash"></i>
                                </a>
                            </td>
                            <td width="1%">
                                <a class="w3-btn w3-white w3-border w3-border-red w3-round-large"
                                   href="{% url 'invoice:invoice-download' id=invoice1.id %}" style="box-shadow: 0 0 3px 3px #0ab6d921;
border-radius: 73px;">
                                  	  <i class="fas fa-file-download"></i>
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <br/>
        <br/>
        <br/>
    </form>

    <div style="margin-right:76%;}"><p>Page Render Time:{{page_render}}</p></div>
    {% endblock content %}